"use strict";(self.webpackChunkfandaqapp=self.webpackChunkfandaqapp||[]).push([[37787],{37787:(Qe,H,c)=>{c.r(H),c.d(H,{ApplicationFormModalComponent:()=>u,ApplicationsComponent:()=>h,ApplicationsService:()=>P,DEFAULT_APPLICATIONS_CREATE_FORM_PROPS:()=>Y,DEFAULT_APPLICATIONS_ENTITY_ACTIONS:()=>oe,DEFAULT_APPLICATIONS_ENTITY_PROPS:()=>ne,DEFAULT_APPLICATIONS_FORM_PROPS:()=>le,DEFAULT_APPLICATIONS_TOOLBAR_ACTIONS:()=>se,DEFAULT_OPENIDDICT_PRO_CREATE_FORM_PROPS:()=>G,DEFAULT_OPENIDDICT_PRO_EDIT_FORM_PROPS:()=>$,DEFAULT_OPENIDDICT_PRO_ENTITY_ACTIONS:()=>J,DEFAULT_OPENIDDICT_PRO_ENTITY_PROPS:()=>Q,DEFAULT_OPENIDDICT_PRO_TOOLBAR_ACTIONS:()=>B,DEFAULT_SCOPES_ENTITY_PROPS:()=>pe,DEFAULT_SCOPES_FORM_PROPS:()=>re,DEFAULT_SCOPES_TOOLBAR_ACTIONS:()=>ce,DEFAULT_SCOPE_CREATE_FORM_PROPS:()=>q,DEFAULT_SCOPE_ENTITY_ACTIONS:()=>de,DefaultApplicationsConsentType:()=>ie,OPENIDDICT_PRO_CREATE_FORM_PROP_CONTRIBUTORS:()=>D,OPENIDDICT_PRO_EDIT_FORM_PROP_CONTRIBUTORS:()=>U,OPENIDDICT_PRO_ENTITY_ACTION_CONTRIBUTORS:()=>E,OPENIDDICT_PRO_ENTITY_PROP_CONTRIBUTORS:()=>M,OPENIDDICT_PRO_TOOLBAR_ACTION_CONTRIBUTORS:()=>R,OpenIddictProExtensionsGuard:()=>Be,OpeniddictproModule:()=>Je,ScopeFormModalComponent:()=>j,ScopesComponent:()=>I,ScopesService:()=>S,TokenLifetimeModalComponent:()=>k,UrisValidator:()=>L,allowFlow:()=>F,defaultApplicationTypes:()=>v,defaultApplicationTypesList:()=>te,defaultApplicationsTypeList:()=>ee,defaultUriPattern:()=>ae,hashSetParser:()=>g});var e=c(19212),p=c(88762),W=c(23758),m=c(69670),a=c(17557);let w=(()=>{class t{constructor(i){this.restService=i,this.apiName="OpenIddictPro",this.create=(o,n)=>this.restService.request({method:"POST",url:"/api/openiddict/applications",body:o},{apiName:this.apiName,...n}),this.delete=(o,n)=>this.restService.request({method:"DELETE",url:"/api/openiddict/applications",params:{id:o}},{apiName:this.apiName,...n}),this.get=(o,n)=>this.restService.request({method:"GET",url:`/api/openiddict/applications/${o}`},{apiName:this.apiName,...n}),this.getList=(o,n)=>this.restService.request({method:"GET",url:"/api/openiddict/applications",params:{filter:o.filter,sorting:o.sorting,skipCount:o.skipCount,maxResultCount:o.maxResultCount}},{apiName:this.apiName,...n}),this.getTokenLifetime=(o,n)=>this.restService.request({method:"GET",url:`/api/openiddict/applications/${o}/token-lifetime`},{apiName:this.apiName,...n}),this.setTokenLifetime=(o,n,l)=>this.restService.request({method:"PUT",url:`/api/openiddict/applications/${o}/token-lifetime`,body:n},{apiName:this.apiName,...l}),this.update=(o,n,l)=>this.restService.request({method:"PUT",url:`/api/openiddict/applications/${o}`,body:n},{apiName:this.apiName,...l})}static#e=this.\u0275fac=function(o){return new(o||t)(e.LFG(p.vgb))};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),x=(()=>{class t{constructor(i){this.restService=i,this.apiName="OpenIddictPro",this.create=(o,n)=>this.restService.request({method:"POST",url:"/api/openiddict/scopes",body:o},{apiName:this.apiName,...n}),this.delete=(o,n)=>this.restService.request({method:"DELETE",url:"/api/openiddict/scopes",params:{id:o}},{apiName:this.apiName,...n}),this.get=(o,n)=>this.restService.request({method:"GET",url:`/api/openiddict/scopes/${o}`},{apiName:this.apiName,...n}),this.getAllScopes=o=>this.restService.request({method:"GET",url:"/api/openiddict/scopes/all"},{apiName:this.apiName,...o}),this.getList=(o,n)=>this.restService.request({method:"GET",url:"/api/openiddict/scopes",params:{filter:o.filter,sorting:o.sorting,skipCount:o.skipCount,maxResultCount:o.maxResultCount}},{apiName:this.apiName,...n}),this.update=(o,n,l)=>this.restService.request({method:"PUT",url:`/api/openiddict/scopes/${o}`,body:n},{apiName:this.apiName,...l})}static#e=this.\u0275fac=function(o){return new(o||t)(e.LFG(p.vgb))};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var fe=c(64716),Z=c(22096),Te=c(32181),be=c(94664),N=c(37398),K=c(99397),_=c(86123),V=c(65765),X=c(37255),z=c(96814),d=c(60095),y=c(11411),he=c(21441),Oe=c(32427);function _e(t,s){1&t&&(e.TgZ(0,"h3"),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"AbpOpenIddict::TokenLifetime")))}function ge(t,s){if(1&t){const i=e.EpF();e.TgZ(0,"blockquote",4)(1,"p",5),e._uU(2),e.ALo(3,"abpLocalization"),e.qZA()(),e.TgZ(4,"form",6),e.NdJ("ngSubmit",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.save())}),e.TgZ(5,"div",7)(6,"label",8),e._uU(7),e.ALo(8,"abpLocalization"),e.qZA(),e._UZ(9,"input",9),e.qZA(),e.TgZ(10,"div",7)(11,"label",10),e._uU(12),e.ALo(13,"abpLocalization"),e.qZA(),e._UZ(14,"input",11),e.qZA(),e.TgZ(15,"div",7)(16,"label",12),e._uU(17),e.ALo(18,"abpLocalization"),e.qZA(),e._UZ(19,"input",13),e.qZA(),e.TgZ(20,"div",7)(21,"label",14),e._uU(22),e.ALo(23,"abpLocalization"),e.qZA(),e._UZ(24,"input",15),e.qZA(),e.TgZ(25,"div",7)(26,"label",16),e._uU(27),e.ALo(28,"abpLocalization"),e.qZA(),e._UZ(29,"input",17),e.qZA(),e.TgZ(30,"div",18)(31,"label",19),e._uU(32),e.ALo(33,"abpLocalization"),e.qZA(),e._UZ(34,"input",20),e.qZA()()}if(2&t){const i=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,8,"AbpOpenIddict::TokenLifetimeHit")),e.xp6(2),e.Q6J("formGroup",i.form),e.xp6(3),e.hij(" ",e.lcZ(8,10,"AbpOpenIddict::AccessTokenLifetime")," "),e.xp6(5),e.hij(" ",e.lcZ(13,12,"AbpOpenIddict::AuthorizationCodeLifetime")," "),e.xp6(5),e.hij(" ",e.lcZ(18,14,"AbpOpenIddict::DeviceCodeLifetime")," "),e.xp6(5),e.hij(" ",e.lcZ(23,16,"AbpOpenIddict::IdentityTokenLifetime")," "),e.xp6(5),e.hij(" ",e.lcZ(28,18,"AbpOpenIddict::RefreshTokenLifetime")," "),e.xp6(5),e.hij(" ",e.lcZ(33,20,"AbpOpenIddict::UserCodeLifetime")," ")}}function Ae(t,s){if(1&t&&(e.TgZ(0,"button",21),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA(),e.TgZ(3,"abp-button",22),e._uU(4),e.ALo(5,"abpLocalization"),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,3,"AbpOpenIddict::Cancel")," "),e.xp6(2),e.Q6J("disabled",i.loading()),e.xp6(1),e.hij("",e.lcZ(5,5,"AbpOpenIddict::Save")," ")}}function ve(t,s){if(1&t&&(e.TgZ(0,"h3"),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA()),2&t){const i=e.oxw(2);e.xp6(1),e.Oqu(e.lcZ(2,1,null!=i.selected&&i.selected.id?"AbpOpenIddict::Edit":"AbpOpenIddict::NewApplication"))}}function Ie(t,s){if(1&t){const i=e.EpF();e.TgZ(0,"form",5),e.NdJ("ngSubmit",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.save())}),e.TgZ(1,"div",6),e._UZ(2,"abp-extensible-form",7),e.qZA()()}if(2&t){const i=e.oxw(2);e.Q6J("formGroup",i.form),e.xp6(2),e.Q6J("selectedRecord",i.selected)}}function Ce(t,s){1&t&&(e.TgZ(0,"button",8),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA(),e.TgZ(3,"abp-button",9),e._uU(4),e.ALo(5,"abpLocalization"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"AbpOpenIddict::Cancel")," "),e.xp6(3),e.Oqu(e.lcZ(5,4,"AbpOpenIddict::Save")))}function ye(t,s){if(1&t){const i=e.EpF();e.TgZ(0,"abp-modal",1),e.NdJ("visibleChange",function(n){e.CHM(i);const l=e.oxw();return e.KtG(l.visibleChange(n))}),e.YNc(1,ve,3,3,"ng-template",null,2,e.W1O)(3,Ie,3,2,"ng-template",null,3,e.W1O)(5,Ce,6,6,"ng-template",null,4,e.W1O),e.qZA()}if(2&t){const i=e.oxw();e.Q6J("visible",!0)("options",i.options)}}function Pe(t,s){if(1&t&&e._UZ(0,"abp-token-lifetime-modal",6),2&t){const i=e.oxw();e.Q6J("selected",i.selected())}}function Ne(t,s){if(1&t){const i=e.EpF();e.TgZ(0,"abp-permission-management",8),e.NdJ("visibleChange",function(n){e.CHM(i);const l=e.oxw();return e.KtG(l.visiblePermissions=n)}),e.qZA()}if(2&t){const i=e.oxw();e.Q6J("visible",i.visiblePermissions)("providerKey",i.providerKey)}}const Se=()=>({value:"C"}),Le=t=>({value:t}),Fe=t=>({value:t,twoWay:!0}),Ee=(t,s,i)=>({providerName:t,providerKey:s,visible:i}),Re=t=>({visibleChange:t}),De=(t,s)=>({inputs:t,outputs:s,componentKey:"PermissionManagement.PermissionManagementComponent"});function Ue(t,s){if(1&t&&(e.TgZ(0,"h3"),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,null!=i.selected&&i.selected.id?"AbpOpenIddict::Edit":"AbpOpenIddict::NewScope"))}}function we(t,s){if(1&t){const i=e.EpF();e.TgZ(0,"form",4),e.NdJ("ngSubmit",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.save())}),e._UZ(1,"abp-extensible-form",5),e.qZA()}if(2&t){const i=e.oxw();e.Q6J("formGroup",i.form)("blueprints",i.blueprints),e.xp6(1),e.Q6J("selectedRecord",i.selected)}}function xe(t,s){1&t&&(e.TgZ(0,"button",6),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA(),e.TgZ(3,"abp-button",7),e._uU(4),e.ALo(5,"abpLocalization"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"AbpOpenIddict::Cancel")," "),e.xp6(3),e.Oqu(e.lcZ(5,4,"AbpOpenIddict::Save")))}class P{constructor(){this.state=new p.gSB({isModalVisible:!1}),this.#e=(0,e.tdS)(!1),this.isModalVisible=(0,e.Flj)(()=>this.#e()),this.#t=(0,e.tdS)(!1),this.isTokenLifetimeModalVisible=(0,e.Flj)(()=>this.#t())}#e;#t;openModal(){this.setModalState(!0)}setModalState(s){this.#e.set(s)}setTokenLifetimeModalState(s){this.#t.set(s)}}class S{constructor(){this.state=new p.gSB({isModalVisible:!1}),this.isModalVisible$=this.state.sliceState(s=>s.isModalVisible)}openModal(){this.setModalState(!0)}setModalState(s){this.state.patch({isModalVisible:s})}}let k=(()=>{class t{constructor(){this.#e=(0,e.f3M)(P),this.#t=(0,e.f3M)(w),this.saved=new e.vpe,this.loading=(0,e.tdS)(!1),this.#i=(0,e.f3M)(d.qu),this.form=this.#i.group({accessTokenLifetime:[null],authorizationCodeLifetime:[null],deviceCodeLifetime:[null],identityTokenLifetime:[null],refreshTokenLifetime:[null],userCodeLifetime:[null]})}#e;#t;#i;save(){this.form.invalid||this.#t.setTokenLifetime(this.selected.id,this.form.value).pipe((0,fe.x)(()=>{this.#e.setTokenLifetimeModalState(!1),this.saved.emit()})).subscribe()}visibleChange(i){i||this.#e.setTokenLifetimeModalState(!1)}ngOnInit(){this.#t.getTokenLifetime(this.selected.id).subscribe(i=>{this.form.patchValue(i)})}static#o=this.\u0275fac=function(o){return new(o||t)};static#n=this.\u0275cmp=e.Xpm({type:t,selectors:[["abp-token-lifetime-modal"]],inputs:{selected:"selected"},outputs:{saved:"saved"},standalone:!0,features:[e.jDz],decls:7,vars:1,consts:[[3,"visible","visibleChange"],["abpHeader",""],["abpBody",""],["abpFooter",""],[1,"blockquote"],[1,"mb-0"],["id","applicationForm","validateOnSubmit","",3,"formGroup","ngSubmit"],[1,"form-group","mb-3"],["for","accessTokenLifetime",1,"form-label"],["type","number","id","accessTokenLifetime","formControlName","accessTokenLifetime",1,"form-control"],["for","authorizationCodeLifetime",1,"form-label"],["type","number","id","authorizationCodeLifetime","formControlName","authorizationCodeLifetime",1,"form-control"],["for","deviceCodeLifetime",1,"form-label"],["type","number","id","deviceCodeLifetime","formControlName","deviceCodeLifetime",1,"form-control"],["for","identityTokenLifetime",1,"form-label"],["type","number","id","identityTokenLifetime","formControlName","identityTokenLifetime",1,"form-control"],["for","refreshTokenLifetime",1,"form-label"],["type","number","id","refreshTokenLifetime","formControlName","refreshTokenLifetime",1,"form-control"],[1,"form-group"],["for","userCodeLifetime",1,"form-label"],["type","number","id","userCodeLifetime","formControlName","userCodeLifetime",1,"form-control"],["type","button","abpClose","",1,"btn","btn-secondary"],["iconClass","fa fa-check","buttonType","submit","formName","applicationForm",3,"disabled"]],template:function(o,n){1&o&&(e.TgZ(0,"abp-modal",0),e.NdJ("visibleChange",function(T){return n.visibleChange(T)}),e.YNc(1,_e,3,3,"ng-template",null,1,e.W1O)(3,ge,35,22,"ng-template",null,2,e.W1O)(5,Ae,6,7,"ng-template",null,3,e.W1O),e.qZA()),2&o&&e.Q6J("visible",!0)},dependencies:[z.ez,m.e2,y.hL,y.J5,m.r0,m.zS,m.YM,p.IR2,d._Y,d.Fj,d.wV,d.JJ,d.JL,d.sg,d.u,p.fuE,p.YzZ],encapsulation:2})}return t})();const ee=[{key:"Confidential client",value:"confidential"},{key:"Public client",value:"public"}],v={public:"public",confidential:"confidential"},te=[{key:"Web",value:"web"},{key:"Native",value:"native"}],Ze=/\r?\n/,Ve="\n";function g(t){return Array.isArray(t)?t.join(Ve):"string"==typeof t?t?t.split(Ze):null:t}const ie=[{key:"Explicit consent",value:"explicit"},{key:"External consent",value:"external"},{key:"Implicit consent",value:"implicit"},{key:"Systematic consent",value:"systematic"}];let u=(()=>{class t{constructor(i,o,n,l,T){this.service=i,this.applicationsService=o,this.localizationService=n,this.subscription=l,this.injector=T,this.saved=new e.vpe,this.types$=(0,Z.of)(ee),this.consentTypes$=(0,Z.of)(ie),this.options={size:"lg"},this.isModalVisible=this.applicationsService.isModalVisible}ngOnChanges(){this.createForm(),this.hideFlowToType()}visibleChange(i){this.applicationsService.setModalState(i)}save(){if(this.form.invalid)return;const i=this.selected?.id,o=!!i;let n;const l=O=>Array.isArray(O)?O:g(O),T={...this.form.value,redirectUris:l(this.form.value.redirectUris),postLogoutRedirectUris:l(this.form.value.postLogoutRedirectUris),extensionGrantTypes:l(this.form.value.extensionGrantTypes)};n=o?this.service.update(i,T):this.service.create(T),n.subscribe(()=>{this.applicationsService.setModalState(!1),this.saved.emit()})}getFormValue(){return this.form?.value||{}}createForm(){const i=this.selected?.id?{...this.selected,redirectUris:g(this.selected.redirectUris),postLogoutRedirectUris:g(this.selected.postLogoutRedirectUris),extensionGrantTypes:g(this.selected.extensionGrantTypes)}:{clientType:null},o=new a.lg(this.injector,i);this.form=(0,a.se)(o)}hideFlowToType(){const i=this.form.controls.clientType;this.subscription.removeOne(this.formValueChanges$),this.formValueChanges$=this.subscription.addOne(i.valueChanges,o=>{o==v.public&&this.form.patchValue({allowDeviceEndpoint:!1,allowClientCredentialsFlow:!1})})}changeTextToType(i){return this.getFormValue().clientType===v.public?this.localizationService.instant(i)+" ("+this.localizationService.instant("AbpOpenIddict::NotAvailableForThisType")+")":this.localizationService.instant(i)}static#e=this.\u0275fac=function(o){return new(o||t)(e.Y36(w),e.Y36(P),e.Y36(p.oQ8),e.Y36(p.FFO),e.Y36(e.zs3))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["abp-application-form-modal"]],inputs:{selected:"selected"},outputs:{saved:"saved"},features:[e.TTD],decls:1,vars:1,consts:[[3,"visible","options","visibleChange",4,"ngIf"],[3,"visible","options","visibleChange"],["abpHeader",""],["abpBody",""],["abpFooter",""],["id","applicationForm","validateOnSubmit","",3,"formGroup","ngSubmit"],[1,"row"],[1,"row","gap-x2",3,"selectedRecord"],["type","button","abpClose","",1,"btn","btn-secondary"],["iconClass","fa fa-check","buttonType","submit","formName","applicationForm"]],template:function(o,n){1&o&&e.YNc(0,ye,7,2,"abp-modal",0),2&o&&e.Q6J("ngIf",n.isModalVisible())},dependencies:[z.O5,d._Y,d.JL,d.sg,p.YzZ,a.gt,y.hL,m.r0,m.zS,m.YM,p.fuE],encapsulation:2})}return t})(),h=(()=>{class t{constructor(){this.service=(0,e.f3M)(P),this.list=(0,e.f3M)(p.XNV),this.confirmationService=(0,e.f3M)(m.YP),this.proxyService=(0,e.f3M)(w),this.data={items:[],totalCount:0},this.selected=(0,e.tdS)({}),this.visiblePermissions=!1,this.onVisiblePermissionChange=i=>{this.visiblePermissions=i}}onSaved(){this.list.get()}edit(i){this.proxyService.get(i).subscribe(o=>{this.selected.set(o),this.service.openModal()})}delete(i,o){this.confirmationService.warn("AbpOpenIddict::ApplicationDeletionWarningMessage","AbpOpenIddict::AreYouSure",{messageLocalizationParams:[o]}).pipe((0,Te.h)(n=>n===m.Tv.Status.confirm),(0,be.w)(()=>this.proxyService.delete(i))).subscribe(()=>{this.list.get()})}ngOnInit(){this.hookToQuery()}onAdd(){this.selected.set({}),this.service.openModal()}openPermissionsModal(i){this.providerKey=i,setTimeout(()=>{this.visiblePermissions=!0},0)}hookToQuery(){this.list.hookToQuery(i=>this.proxyService.getList(i)).subscribe(i=>this.data=i)}openTokenLifetimeModal(i){this.selected.set(i),this.service.setTokenLifetimeModalState(!0)}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["abp-applications"]],features:[e._Bn([p.XNV,{provide:a.ex,useValue:"OpenIddictPro.Applications"}])],decls:9,vars:25,consts:[[3,"title","toolbar"],["id","wrapper"],["localizationSourceName","AbpOpenIddict",3,"list"],[1,"card"],[3,"data","recordsTotal","list"],[3,"selected","saved"],[3,"selected"],["providerName","C",3,"visible","providerKey","visibleChange",4,"abpReplaceableTemplate"],["providerName","C",3,"visible","providerKey","visibleChange"]],template:function(o,n){1&o&&(e.TgZ(0,"abp-page",0),e.ALo(1,"abpLocalization"),e.TgZ(2,"div",1),e._UZ(3,"abp-advanced-entity-filters",2),e.TgZ(4,"div",3),e._UZ(5,"abp-extensible-table",4),e.qZA()()(),e.TgZ(6,"abp-application-form-modal",5),e.NdJ("saved",function(){return n.onSaved()}),e.qZA(),e.YNc(7,Pe,1,1,"abp-token-lifetime-modal",6)(8,Ne,1,2,"abp-permission-management",7)),2&o&&(e.Q6J("title",e.lcZ(1,9,"AbpOpenIddict::Applications"))("toolbar",n.data.items),e.xp6(3),e.Q6J("list",n.list),e.xp6(2),e.Q6J("data",n.data.items)("recordsTotal",n.data.totalCount)("list",n.list),e.xp6(1),e.Q6J("selected",n.selected()),e.xp6(1),e.um2(7,n.service.isTokenLifetimeModalVisible()?7:-1),e.xp6(1),e.Q6J("abpReplaceableTemplate",e.WLB(22,De,e.kEZ(16,Ee,e.DdM(11,Se),e.VKq(12,Le,n.providerKey),e.VKq(14,Fe,n.visiblePermissions)),e.VKq(20,Re,n.onVisiblePermissionChange))))},dependencies:[p.zLP,a.m5,_.hE,V.II,X.M,k,u,p.fuE],encapsulation:2})}return t})(),j=(()=>{class t{constructor(i,o,n){this.injector=i,this.scopesService=o,this.service=n,this.saved=new e.vpe,this.blueprints={pattern:"AbpOpenIddict::TheScopeNameCannotContainSpaces"},this.isModalVisible$=this.scopesService.isModalVisible$}ngOnChanges(i){this.createForm()}save(){if(this.form.invalid)return;const i=this.selected.id,o=!!i;let n;const l={...this.form.value,resources:g(this.form.value.resources)};n=o?this.service.update(i,l):this.service.create(l),n.subscribe(()=>{this.scopesService.setModalState(!1),this.saved.emit()})}visibleChange(i){this.scopesService.setModalState(i)}createForm(){const i=this.selected?.id?{...this.selected,resources:g(this.selected.resources)}:{},o=new a.lg(this.injector,i);this.form=(0,a.se)(o)}static#e=this.\u0275fac=function(o){return new(o||t)(e.Y36(e.zs3),e.Y36(S),e.Y36(x))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["abp-scope-form-modal"]],inputs:{selected:"selected"},outputs:{saved:"saved"},features:[e.TTD],decls:8,vars:3,consts:[[3,"visible","visibleChange"],["abpHeader",""],["abpBody",""],["abpFooter",""],["id","scopeForm","validateOnSubmit","",3,"formGroup","blueprints","ngSubmit"],[3,"selectedRecord"],["type","button","abpClose","",1,"btn","btn-secondary"],["iconClass","fa fa-check","buttonType","submit","formName","scopeForm"]],template:function(o,n){1&o&&(e.TgZ(0,"abp-modal",0),e.NdJ("visibleChange",function(T){return n.visibleChange(T)}),e.ALo(1,"async"),e.YNc(2,Ue,3,3,"ng-template",null,1,e.W1O)(4,we,2,3,"ng-template",null,2,e.W1O)(6,xe,6,6,"ng-template",null,3,e.W1O),e.qZA()),2&o&&e.Q6J("visible",e.lcZ(1,1,n.isModalVisible$))},dependencies:[d._Y,d.JL,d.sg,p.YzZ,a.gt,y.hL,m.r0,m.zS,m.YM,z.Ov,p.fuE],encapsulation:2})}return t})(),I=(()=>{class t{constructor(i,o,n,l){this.list=i,this.service=o,this.scopesService=n,this.confirmationService=l,this.data={items:[],totalCount:0},this.selected={}}hookToQuery(){this.list.hookToQuery(i=>this.service.getList(i)).subscribe(i=>this.data=i)}ngOnInit(){this.hookToQuery()}onAdd(){this.selected={},this.scopesService.openModal()}onEdit(i){this.service.get(i).subscribe(o=>{this.selected=o,this.scopesService.openModal()})}onDelete(i,o){this.confirmationService.warn("AbpOpenIddict::ScopeDeletionWarningMessage","AbpOpenIddict::AreYouSure",{messageLocalizationParams:[o]}).subscribe(l=>{l===m.Tv.Status.confirm&&this.service.delete(i).subscribe(()=>this.list.get())})}onSaved(){this.list.get()}static#e=this.\u0275fac=function(o){return new(o||t)(e.Y36(p.XNV),e.Y36(x),e.Y36(S),e.Y36(m.YP))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["abp-scopes"]],features:[e._Bn([p.XNV,{provide:a.ex,useValue:"OpenIddictPro.Scopes"}])],decls:7,vars:9,consts:[[3,"title","toolbar"],["id","wrapper"],["localizationSourceName","AbpOpenIddict",3,"list"],[1,"card"],[3,"data","recordsTotal","list"],[3,"selected","saved"]],template:function(o,n){1&o&&(e.TgZ(0,"abp-page",0),e.ALo(1,"abpLocalization"),e.TgZ(2,"div",1),e._UZ(3,"abp-advanced-entity-filters",2),e.TgZ(4,"div",3),e._UZ(5,"abp-extensible-table",4),e.qZA()()(),e.TgZ(6,"abp-scope-form-modal",5),e.NdJ("saved",function(){return n.onSaved()}),e.qZA()),2&o&&(e.Q6J("title",e.lcZ(1,7,"AbpOpenIddict::Scopes"))("toolbar",n.data.items),e.xp6(3),e.Q6J("list",n.list),e.xp6(2),e.Q6J("data",n.data.items)("recordsTotal",n.data.totalCount)("list",n.list),e.xp6(1),e.Q6J("selected",n.selected))},dependencies:[a.m5,_.hE,V.II,j,p.fuE],encapsulation:2})}return t})();const oe=a.uk.createMany([{text:"AbpOpenIddict::Edit",action:t=>{t.getInjected(h).edit(t.record.id)},permission:"OpenIddictPro.Application.Update"},{text:"AbpOpenIddict::TokenLifetime",action:t=>{t.getInjected(h).openTokenLifetimeModal(t.record)},permission:"OpenIddictPro.Application.Update"},{text:"AbpOpenIddict::ChangeHistory",action:t=>{t.getInjected(_.kv)(t.record.id,"Volo.Abp.OpenIddict.Applications.OpenIddictApplication")},permission:"AuditLogging.ViewChangeHistory:Volo.Abp.OpenIddict.Pro.Applications.Application"},{text:"AbpOpenIddict::Permissions",action:t=>{t.getInjected(h).openPermissionsModal(t.record.clientId)},permission:"OpenIddictPro.Application.ManagePermissions"},{text:"LanguageManagement::Delete",action:t=>{t.getInjected(h).delete(t.record.id,t.record.clientId)},permission:"LanguageManagement.Languages.Delete"}]),ne=a.QC.createMany([{type:"string",name:"applicationType",displayName:"AbpOpenIddict::ApplicationType",columnWidth:100},{type:"string",name:"clientId",displayName:"AbpOpenIddict::ClientId",columnWidth:200},{type:"string",name:"displayName",displayName:"AbpOpenIddict::DisplayName",columnWidth:100},{type:"string",name:"clientType",displayName:"AbpOpenIddict::ClientType",columnWidth:200}]),se=a.JE.createMany([{text:"AbpOpenIddict::NewApplication",action:t=>{t.getInjected(h).onAdd()},permission:"OpenIddictPro.Application.Create",icon:"fa fa-plus"}]),ae=/^([a-z][a-z0-9+.-]*):(?:\/\/((?:(?=((?:[a-z0-9-._~!$&'()*+,;=:]|%[0-9A-F]{2})*))(\3)@)?(?=(\[[0-9A-F:.]{2,}\]|(?:[a-z0-9-._~!$&'()*+,;=]|%[0-9A-F]{2})*))\5(?::(?=(\d*))\6)?)(\/(?=((?:[a-z0-9-._~!$&'()*+,;=:@\/]|%[0-9A-F]{2})*))\8)?|(\/?(?!\/)(?=((?:[a-z0-9-._~!$&'()*+,;=:@\/]|%[0-9A-F]{2})*))\10)?)(?:\?(?=((?:[a-z0-9-._~!$&'()*+,;=:@\/?]|%[0-9A-F]{2})*))\11)?(?:#(?=((?:[a-z0-9-._~!$&'()*+,;=:@\/?]|%[0-9A-F]{2})*))\12)?$/i,ze=/(\r\n|\r|\n)/;function L(){const t=ae;return s=>{if(function ke(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}(s.value))return null;const i=s.value,o=i.split(ze).filter(l=>!!l.trim());return 0===o.length||o.every(l=>t.test(l))?null:{url:t.toString(),actualValue:i}}}const F=({allowImplicitFlow:t,allowAuthorizationCodeFlow:s,allowHybridFlow:i})=>s||t||i,A={name:"left",className:"col col-md-6"},f={name:"right",className:"col col-md-6"},r="mb-1 form-group",Y=a.Od.createMany([{type:"string",options:t=>(0,Z.of)(te),name:"applicationType",displayName:"AbpOpenIddict::ApplicationType",id:"applicationType",group:A,className:r,validators:()=>[d.Validators.required]},{type:"string",name:"clientId",displayName:"AbpOpenIddict::ClientId",id:"clientId",validators:()=>[d.Validators.required],group:A,className:r},{type:"string",name:"displayName",displayName:"AbpOpenIddict::DisplayName",id:"displayName",validators:()=>[d.Validators.required],group:A,className:r},{type:"string",name:"clientUri",displayName:"AbpOpenIddict::ClientUri",id:"clientUri",validators:()=>[L()],group:A,className:r},{type:"string",name:"logoUri",displayName:"AbpOpenIddict::LogoUri",id:"logoUri",group:A,className:r},{type:"string",name:"clientType",displayName:"AbpOpenIddict::ClientType",id:"clientType",validators:()=>[d.Validators.required],options:t=>{const s=t.getInjected(p.oQ8).instant("AbpUi::NotAssigned");return t.getInjected(u).types$.pipe((0,N.U)(i=>[{key:s,value:null},...i]))},group:A,className:r},{type:"string",name:"clientSecret",displayName:"AbpOpenIddict::ClientSecret",id:"clientSecret",visible:t=>t.getInjected(u).getFormValue().type===v.confidential,group:A,className:r},{type:"boolean",defaultValue:!1,name:"allowAuthorizationCodeFlow",displayName:"AbpOpenIddict::AllowAuthorizationCodeFlow",id:"allowAuthorizationCodeFlow",group:f,className:r},{type:"boolean",defaultValue:!1,name:"allowImplicitFlow",displayName:"AbpOpenIddict::AllowImplicitFlow",id:"allowImplicitFlow",group:f,className:r},{type:"boolean",defaultValue:!1,name:"allowHybridFlow",displayName:"AbpOpenIddict::AllowHybridFlow",id:"allowHybridFlow",group:f,className:r},{type:"boolean",defaultValue:!1,name:"allowPasswordFlow",displayName:"AbpOpenIddict::AllowPasswordFlow",id:"allowPasswordFlow",group:f,className:r},{type:"boolean",defaultValue:!1,name:"allowClientCredentialsFlow",displayTextResolver:t=>t.getInjected(u).changeTextToType("AbpOpenIddict::AllowClientCredentialsFlow"),disabled:t=>t.getInjected(u).getFormValue().type===v.public,id:"allowClientCredentialsFlow",group:f,className:r},{type:"boolean",defaultValue:!1,name:"allowRefreshTokenFlow",displayName:"AbpOpenIddict::AllowRefreshTokenFlow",disabled:t=>{const{allowHybridFlow:s,allowAuthorizationCodeFlow:i,allowPasswordFlow:o}=t.getInjected(u).getFormValue();return!(s||i||o)},id:"allowRefreshTokenFlow",group:f,className:r},{type:"boolean",defaultValue:!1,name:"allowDeviceEndpoint",displayTextResolver:t=>t.getInjected(u).changeTextToType("AbpOpenIddict::AllowDeviceEndpoint"),disabled:t=>t.getInjected(u).getFormValue().type===v.public,id:"allowDeviceEndpoint",group:f,className:r},{type:"string",name:"consentType",displayName:"AbpOpenIddict::ConsentType",id:"consentType",options:t=>t.getInjected(u).consentTypes$,visible:t=>{const s=t.getInjected(u).getFormValue();return F(s)},group:f,className:r},{type:"text",name:"extensionGrantTypes",displayName:"AbpOpenIddict::ExtensionGrantTypes",id:"extensionGrantTypes",className:r,group:f},{type:"multiselect",name:"scopes",displayName:"AbpOpenIddict::Scopes",id:"scopes",defaultValue:[],options:t=>t.getInjected(x).getAllScopes().pipe((0,N.U)(s=>s.map(i=>({key:i.name,value:i.name})))),group:f,className:r},{type:"text",name:"redirectUris",displayName:"AbpOpenIddict::RedirectUris",id:"redirectUris",validators:()=>[L()],visible:t=>{const s=t.getInjected(u).getFormValue();return F(s)},group:f,className:r},{type:"boolean",defaultValue:!1,name:"allowLogoutEndpoint",displayName:"AbpOpenIddict::AllowLogoutEndpoint",id:"allowLogoutEndpoint",visible:t=>{const s=t.getInjected(u).getFormValue();return F(s)},group:f,className:r},{type:"text",name:"postLogoutRedirectUris",displayName:"AbpOpenIddict::PostLogoutRedirectUris",id:"postLogoutRedirectUris",validators:()=>[L()],visible:t=>{const{allowLogoutEndpoint:s}=t.getInjected(u).getFormValue();return s},group:f,className:r}]),le=Y.concat(a.Od.createMany([{type:"boolean",name:"enabled",displayName:"AbpOpenIddict::Enabled",id:"enabled",defaultValue:!1,group:f,className:r}])),pe=a.QC.createMany([{type:"string",name:"name",displayName:"AbpOpenIddict::Name",columnWidth:200},{type:"string",name:"displayName",displayName:"AbpOpenIddict::DisplayName",columnWidth:200},{type:"string",name:"description",displayName:"AbpOpenIddict::Description",columnWidth:200}]),ce=a.JE.createMany([{text:"AbpOpenIddict::NewScope",action:t=>{t.getInjected(I).onAdd()},permission:"OpenIddictPro.Scope.Create",icon:"fa fa-plus"}]),q=a.Od.createMany([{type:"string",name:"name",displayName:"AbpOpenIddict::Name",id:"name",validators:()=>[d.Validators.required,d.Validators.pattern(/^\S+$/)]},{type:"string",name:"displayName",displayName:"AbpOpenIddict::DisplayName",id:"displayName"},{type:"string",name:"description",displayName:"AbpOpenIddict::Description",id:"description"},{type:"text",name:"resources",displayName:"AbpOpenIddict::Resources",id:"resources"}]),re=q,de=a.uk.createMany([{text:"AbpOpenIddict::Edit",action:t=>{t.getInjected(I).onEdit(t.record.id)},permission:"OpenIddictPro.Scope.Update"},{text:"AbpOpenIddict::ChangeHistory",action:t=>{t.getInjected(_.kv)(t.record.id,"Volo.Abp.OpenIddict.Scopes.OpenIddictScope")},permission:"AuditLogging.ViewChangeHistory:Volo.Abp.OpenIddict.Pro.Scopes.Scope",visible:t=>!!t.getInjected(_.kv,null)},{text:"AbpOpenIddict::Delete",action:t=>{t.getInjected(I).onDelete(t.record.id,t.record.name)},permission:"OpenIddictPro.Scope.Delete"}]),J={"OpenIddictPro.Applications":oe,"OpenIddictPro.Scopes":de},B={"OpenIddictPro.Applications":se,"OpenIddictPro.Scopes":ce},Q={"OpenIddictPro.Applications":ne,"OpenIddictPro.Scopes":pe},G={"OpenIddictPro.Applications":Y,"OpenIddictPro.Scopes":q},$={"OpenIddictPro.Applications":le,"OpenIddictPro.Scopes":re},E=new e.OlP("OPENIDDICT_PRO_ENTITY_ACTION_CONTRIBUTORS"),R=new e.OlP("OPENIDDICT_PRO__TOOLBAR_ACTION_CONTRIBUTORS"),M=new e.OlP("OPENIDDICT_PRO_ENTITY_PROP_CONTRIBUTORS"),D=new e.OlP("OPENIDDICT_PRO_CREATE_FORM_PROP_CONTRIBUTORS"),U=new e.OlP("OPENIDDICT_PRO_EDIT_FORM_PROP_CONTRIBUTORS"),Ye=[{path:"",redirectTo:"Applications",pathMatch:"full"},{path:"",component:p.O39,canActivate:[p.p2e,p.zaK],resolve:[()=>{const t=(0,e.f3M)(e.zs3),s=t.get(a.X6),i=t.get(E,null)||{},o=t.get(R,null)||{},n=t.get(M,null)||{},l=t.get(D,null)||{},T=t.get(U,null)||{},O=t.get(p.XJE);return(0,a.ot)(O,"OpenIddictPro").pipe((0,N.U)(b=>({"OpenIddictPro.Applications":b.ApiResource,"OpenIddictPro.Scopes":b.Scopes})),(0,a.V_)(O,"AbpOpenIddictPro"),(0,K.b)(b=>{(0,a.Fr)(s.entityActions,J,i),(0,a.Fr)(s.toolbarActions,B,o),(0,a.Hp)(s.entityProps,Q,b.prop,n),(0,a.Hp)(s.createFormProps,G,b.createForm,l),(0,a.Hp)(s.editFormProps,$,b.editForm,T)}))}],children:[{path:"Applications",component:p.c$y,data:{requiredPolicy:"OpenIddictPro.Application",replaceableComponent:{key:"OpenIddictPro.Applications",defaultComponent:h}}},{path:"Scopes",component:p.c$y,data:{requiredPolicy:"OpenIddictPro.Scopes",replaceableComponent:{key:"OpenIddictPro.Scopes",defaultComponent:I}}}]}];let qe=(()=>{class t{static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275mod=e.oAB({type:t});static#i=this.\u0275inj=e.cJS({imports:[W.Bz.forChild(Ye),W.Bz]})}return t})(),Je=(()=>{class t{static forChild(i={}){return{ngModule:t,providers:[{provide:E,useValue:i.entityActionContributors},{provide:R,useValue:i.toolbarActionContributors},{provide:M,useValue:i.entityPropContributors},{provide:D,useValue:i.createFormPropContributors},{provide:U,useValue:i.editFormPropContributors},P,S]}}static forLazy(i={}){return new p.Cgl(t.forChild(i))}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275mod=e.oAB({type:t});static#i=this.\u0275inj=e.cJS({imports:[qe,p.IR2,_.vv,m.e2,Oe.XC,y.h2,V.BG,_.jE,X.x,a.gt,k,a.m5]})}return t})(),Be=(()=>{class t{constructor(i){this.injector=i}canActivate(){const i=this.injector.get(a.X6),o=this.injector.get(E,null)||{},n=this.injector.get(R,null)||{},l=this.injector.get(M,null)||{},T=this.injector.get(D,null)||{},O=this.injector.get(U,null)||{},b=this.injector.get(p.XJE);return(0,a.ot)(b,"OpenIddictPro").pipe((0,N.U)(C=>({"OpenIddictPro.Applications":C.ApiResource,"OpenIddictPro.Scopes":C.Scopes})),(0,a.V_)(b,"AbpOpenIddictPro"),(0,K.b)(C=>{(0,a.Fr)(i.entityActions,J,o),(0,a.Fr)(i.toolbarActions,B,n),(0,a.Hp)(i.entityProps,Q,C.prop,l),(0,a.Hp)(i.createFormProps,G,C.createForm,T),(0,a.Hp)(i.editFormProps,$,C.editForm,O)}),(0,he.h)(!0))}static#e=this.\u0275fac=function(o){return new(o||t)(e.LFG(e.zs3))};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac})}return t})()}}]);